name: Make Commands CI

on:
  pull_request:
    paths:
      - Makefile
      - ansible/playbooks/**
      - .github/workflows/make-commands.yml

jobs:
  make-help:
    name: make help
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run make help
        run: make help

  make-silverblue:
    name: make silverblue
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Ansible
        run: pip install ansible-core
      - name: Validate playbook syntax
        run: ansible-playbook --syntax-check ansible/playbooks/silverblue.yml

  make-kinoite:
    name: make kinoite
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Ansible
        run: pip install ansible-core
      - name: Validate playbook syntax
        run: ansible-playbook --syntax-check ansible/playbooks/kinoite.yml

  make-update:
    name: make update
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Ansible
        run: pip install ansible-core
      - name: Validate playbook syntax
        run: ansible-playbook --syntax-check ansible/playbooks/update.yml

  make-ollama:
    name: make ollama
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Ansible
        run: pip install ansible-core
      - name: Validate playbook syntax
        run: ansible-playbook --syntax-check ansible/playbooks/ollama.yml

  make-reset-home:
    name: make reset-home
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Ansible
        run: pip install ansible-core
      - name: Validate playbook syntax
        run: ansible-playbook --syntax-check ansible/playbooks/reset-home.yml

  make-setup:
    name: make setup
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run make help to validate Makefile
        run: make help
